{% schema %}
{
  "name": "Announcement Bar",
  "settings": [
    {
      "type": "text",
      "id": "announcement_text",
      "label": "Announcement Text",
      "default": "Welcome to our store!"
    },
    {
      "type": "color",
      "id": "announcement_text_color",
      "label": "Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "announcement_bg_color",
      "label": "Background Color",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "announcement_animation",
      "label": "Text Animation",
      "options": [
        {
          "value": "static",
          "label": "Static"
        },
        {
          "value": "marquee",
          "label": "Marquee"
        }
      ],
      "default": "static"
    },
    {
      "type": "select",
      "id": "announcement_text_alignment",
      "label": "Text Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    }
  ],
  "presets": [
    {
      "name": "Announcement",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{% if section.settings.announcement_text %}
  <style>
    .announcement-bar-{{ section.id }} {
      background-color: {{ section.settings.announcement_bg_color }};
      color: {{ section.settings.announcement_text_color }};
      text-align: {% if section.settings.announcement_animation == 'static' %}{{ section.settings.announcement_text_alignment }}{% else %}initial{% endif %};
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .announcement-bar-{{ section.id }} .language-switcher {
      margin-left: auto;
    }
  </style>
  <div class="announcement-bar-{{ section.id }}">
    <div class="announcement-text">
      {% if section.settings.announcement_animation == 'marquee' %}
        <marquee behavior="scroll" direction="left">{{ section.settings.announcement_text }}</marquee>
      {% else %}
        <div style="text-align: {{ section.settings.announcement_text_alignment }}">{{ section.settings.announcement_text }}</div>
      {% endif %}
    </div>
    <div class="language-switcher">
      {% if shop.locales.size > 1 %}
        <select id="language-selector" onchange="window.location.href=this.value;">
          {% for locale in shop.locales %}
            <option value="{{ locale.url }}" {% if locale.code == shop.locale %}selected{% endif %}>
              {{ locale.name }}
            </option>
          {% endfor %}
        </select>
      {% endif %}
    </div>
  </div>
{% endif %}
